<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[Combine] 예제 1 &amp; 제네릭으로 UIKit에서 SwiftUI 불러오기 - DongHyeon Kim’s Blog</title>
<meta name="description" content="Combine 예제   1. scrollView 추가 및 상하좌우 제약 0 설정      2. UIView 추가 및 추가한 UIView를 Content Layout Guide에 드래그하여 상하좌우 제약 0 설정    UIView를 Frame Layout Guide로 드래그해서 Equal Width 해주자   size inspactor에서 width(가로막대) 더블 클릭 -&gt; Proportional Widt~ 클릭 -&gt; Multiplier를 1로 설정   이상태에서 빨간 오류 뜨는 이유는 View에 대한 내용물이 없어서 즉 크기가 없어서 그렇다        3. View에 Vertical Stack View 생성    Stack View를 View로 드래그하여 상하좌우 제약 0으로 설정   vertical stack에서 가로 크기를 꽉 채우기 위해 alighment는 fill 설정   vertical stack에서 내용물을 동일하게 분배시키기 위해 fill equally 설정   spacing 20 설정   이제 크기가 있는 애를 스택뷰에 넣으면 오토레이아웃이 잡힌다   추가적으로 size inspactor에서 simulated size를 Fixed -&gt; Freeform으로 변경한다, 높이를 1000으로 설정한다.      4. 결과     5. 화면이동을 위해 네비게이션 컨투롤러로 감싸기      6. 화면이동 코드 // //  ViewController.swift //  CombineTutorial-example // //  Created by 김동현 on 7/14/25. //  import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!          override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                 #warning(&quot;TODO: - numbers로 화면이동&quot;)                 let numbersStoryboard = UIStoryboard(name: &quot;Numbers&quot;, bundle: Bundle.main)                                  // vc의 storyboardId                 let numbersVC = numbersStoryboard.instantiateViewController(withIdentifier: &quot;NumbersViewController&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     7. 화면이동 코드 리팩토링 꿀팁    name과 withIdentifier를 하드코딩하지 않는 간단한 방법으로 수정 가능하다.   프로토콜을 활용하면 된다.   UIViewController+.swift import UIKit  /*  static 변수  - 인스턴스를 생성하지 않아도 접근할 수 있다  - 타입에 속한 변수이며, 모든 인스턴스가 이 값을 공유한다    static 함수는  - 인스턴스를 만들지 않고도 호출할 수 있다  - 보통 공통 정보 제공이나 객체 생성 팩토리 용도로 사용한다    */  protocol Storyboarded {     // static함수는 해당하는 객체를 메모리에 만들지 않아도 만들 수 있다     static func instantiate(_ storyboardName: String) -&gt; Self }  // 프로토콜 정의 // Storyboarded를 준수하면서 본인이 UIViewController이라면 extension Storyboarded where Self: UIViewController {          /// 객체를 메모리에 생성하지 않고도 호출 가능한 타입 메서드입니다.     ///     /// 주어진 스토리보드 이름에서 이 타입의 뷰 컨트롤러를 인스턴스화합니다.     /// - Parameter storyboardName: 뷰 컨트롤러가 위치한 스토리보드 파일의 이름     /// - Returns: 스토리보드에서 생성된 현재 타입(Self)의 인스턴스     static func instantiate(_ storyboardName: String) -&gt; Self {         let storyboard = UIStoryboard(name: storyboardName, bundle: Bundle.main) // 내자신의 이름         let vc = storyboard.instantiateViewController(withIdentifier: String(describing: self)) as! Self         return vc     } }  extension UIViewController: Storyboarded {}   ViewController.swift import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!          override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     8. UIKit에서 SwiftUI 사용    SwiftUI + Combine을 위해 추가해보자   NumbersSwiftUIContainerVC.swift import UIKit import SwiftUI  // MARK: - HostingController final class NumbersSwiftUIViewContainerVC: UIViewController {     override func viewDidLoad() {         super.viewDidLoad()         self.view.backgroundColor = .white         self.configureHostingVC()     }          fileprivate func configureHostingVC() {         let hostingVC = UIHostingController(rootView: NumbersView())         hostingVC.view.translatesAutoresizingMaskIntoConstraints = false         self.addChild(hostingVC)         self.view.addSubview(hostingVC.view)         hostingVC.didMove(toParent: self)         NSLayoutConstraint.activate([             hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),             hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),             hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),             hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)         ])     } }  /*  uikit은 메모리 참조방식  swiftui는 뷰를 재생성하는 방식(계속 복사생성)  */ struct NumbersView: View {          @State private var input: String = &quot;&quot;     var body: some View {         VStack(alignment: .trailing) {             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             Divider()             Text(&quot;합계&quot;)                 .fontWeight(.bold)                 .foregroundStyle(.white)         }         .padding(.horizontal, 100)         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.yellow)     } }  #Preview {     NumbersView() }   ViewController import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!     @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!               override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)                  navToNumberSwiftUIBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersSwiftUIViewContainerVC()                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     9. 제네릭으로 리팩토링    위 코드로 사용을 해도 되지만, 매번 ContainerVC를 만들어야해서 이 불편함을 해결하기 위해    제네릭으로 변환해보자   NumbersSwiftUIContainerVC -&gt; SwiftUIContainerVC.swift import UIKit import SwiftUI  // MARK: - HostingController final class SwiftUIViewContainerVC&lt;SwiftUIView: View&gt;: UIViewController {          let swiftUIView: SwiftUIView          init(swiftUIView: SwiftUIView) {         self.swiftUIView = swiftUIView                  // UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다         super.init(nibName: nil, bundle: nil)     }          // 코드베이스 구현시 필요     required init?(coder: NSCoder) {         fatalError(&quot;init(coder:) has not been implemented&quot;)     }          override func viewDidLoad() {         super.viewDidLoad()         self.view.backgroundColor = .white         self.configureHostingVC()     }          fileprivate func configureHostingVC() {         let hostingVC = UIHostingController(rootView: swiftUIView)         hostingVC.view.translatesAutoresizingMaskIntoConstraints = false         self.addChild(hostingVC)         self.view.addSubview(hostingVC.view)         hostingVC.didMove(toParent: self)         NSLayoutConstraint.activate([             hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),             hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),             hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),             hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)         ])     } }  /*  uikit은 메모리 참조방식  swiftui는 뷰를 재생성하는 방식(계속 복사생성)  */ struct NumbersView: View {          @State private var input: String = &quot;&quot;     var body: some View {         VStack(alignment: .trailing) {             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             Divider()             Text(&quot;합계&quot;)                 .fontWeight(.bold)                 .foregroundStyle(.white)         }         .padding(.horizontal, 100)         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.yellow)     } }  #Preview {     NumbersView() }   ViewController import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!     @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!               override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)                  navToNumberSwiftUIBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = SwiftUIViewContainerVC(swiftUIView: NumbersView())                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     10. 제네릭 코드를 추가 리팩토링    SwiftUIView를 가지고 있으니 Static 메서드로 뺼 수 있을 것 같다.   View+.swift import SwiftUI  extension View {     // self는 View view 프로토콜 타입 자체를 의미한다. 그런데 View는 프로토콜이기 때문에 구체적인 인스턴스를 알 수 없고 self를 View 인스턴스로 사용할 수 없다.     // 또한 static은 탕비 메서드이기 때문에 타입 자체에서 호출되며 구체적인 인스턴스를 만들지 못한다.     // 하지만 SwiftUIViewContainerVC는 생성자에서 View 인스턴스를 요구하기 때문에 타입만으로 만들 수 없다.     // 즉 self가 NumberView인스턴스가 되어야 한다     // 이미 생성이 됬을테니 static를뺸다     func getContainerVC() -&gt; UIViewController {         return SwiftUIViewContainerVC(swiftUIView: self)     } }   SwiftUIContainerVC.swift import UIKit import SwiftUI  // MARK: - HostingController final class SwiftUIViewContainerVC&lt;SwiftUIView: View&gt;: UIViewController {          let swiftUIView: SwiftUIView          init(swiftUIView: SwiftUIView) {         self.swiftUIView = swiftUIView                  // UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다         super.init(nibName: nil, bundle: nil)     }          // 코드베이스 구현시 필요     required init?(coder: NSCoder) {         fatalError(&quot;init(coder:) has not been implemented&quot;)     }          override func viewDidLoad() {         super.viewDidLoad()         self.view.backgroundColor = .white         self.configureHostingVC()     }          fileprivate func configureHostingVC() {         let hostingVC = UIHostingController(rootView: swiftUIView)         hostingVC.view.translatesAutoresizingMaskIntoConstraints = false         self.addChild(hostingVC)         self.view.addSubview(hostingVC.view)         hostingVC.didMove(toParent: self)         NSLayoutConstraint.activate([             hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),             hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),             hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),             hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)         ])     } }  /*  uikit은 메모리 참조방식  swiftui는 뷰를 재생성하는 방식(계속 복사생성)  */ struct NumbersView: View {          @State private var input: String = &quot;&quot;     var body: some View {         VStack(alignment: .trailing) {             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             Divider()             Text(&quot;합계&quot;)                 .fontWeight(.bold)                 .foregroundStyle(.white)         }         .padding(.horizontal, 100)         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.yellow)     } }  struct TestView: View {     var body: some View {         VStack {          }         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.purple)     } }  #Preview {     NumbersView() }   ViewController.swift import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!     @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!               override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)                  navToNumberSwiftUIBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersView().getContainerVC()                 self.navigationController?.pushViewController(numbersVC, animated: true)                                  /*                 let testVC = TestView().getContainerVC()                 self.navigationController?.pushViewController(testVC, animated: true)                  */                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }">


  <meta name="author" content="Dong Hyeon">
  
  <meta property="article:author" content="Dong Hyeon">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DongHyeon Kim's Blog">
<meta property="og:title" content="[Combine] 예제 1 &amp; 제네릭으로 UIKit에서 SwiftUI 불러오기">
<meta property="og:url" content="http://localhost:4000/Combine-example-1/">


  <meta property="og:description" content="Combine 예제   1. scrollView 추가 및 상하좌우 제약 0 설정      2. UIView 추가 및 추가한 UIView를 Content Layout Guide에 드래그하여 상하좌우 제약 0 설정    UIView를 Frame Layout Guide로 드래그해서 Equal Width 해주자   size inspactor에서 width(가로막대) 더블 클릭 -&gt; Proportional Widt~ 클릭 -&gt; Multiplier를 1로 설정   이상태에서 빨간 오류 뜨는 이유는 View에 대한 내용물이 없어서 즉 크기가 없어서 그렇다        3. View에 Vertical Stack View 생성    Stack View를 View로 드래그하여 상하좌우 제약 0으로 설정   vertical stack에서 가로 크기를 꽉 채우기 위해 alighment는 fill 설정   vertical stack에서 내용물을 동일하게 분배시키기 위해 fill equally 설정   spacing 20 설정   이제 크기가 있는 애를 스택뷰에 넣으면 오토레이아웃이 잡힌다   추가적으로 size inspactor에서 simulated size를 Fixed -&gt; Freeform으로 변경한다, 높이를 1000으로 설정한다.      4. 결과     5. 화면이동을 위해 네비게이션 컨투롤러로 감싸기      6. 화면이동 코드 // //  ViewController.swift //  CombineTutorial-example // //  Created by 김동현 on 7/14/25. //  import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!          override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                 #warning(&quot;TODO: - numbers로 화면이동&quot;)                 let numbersStoryboard = UIStoryboard(name: &quot;Numbers&quot;, bundle: Bundle.main)                                  // vc의 storyboardId                 let numbersVC = numbersStoryboard.instantiateViewController(withIdentifier: &quot;NumbersViewController&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     7. 화면이동 코드 리팩토링 꿀팁    name과 withIdentifier를 하드코딩하지 않는 간단한 방법으로 수정 가능하다.   프로토콜을 활용하면 된다.   UIViewController+.swift import UIKit  /*  static 변수  - 인스턴스를 생성하지 않아도 접근할 수 있다  - 타입에 속한 변수이며, 모든 인스턴스가 이 값을 공유한다    static 함수는  - 인스턴스를 만들지 않고도 호출할 수 있다  - 보통 공통 정보 제공이나 객체 생성 팩토리 용도로 사용한다    */  protocol Storyboarded {     // static함수는 해당하는 객체를 메모리에 만들지 않아도 만들 수 있다     static func instantiate(_ storyboardName: String) -&gt; Self }  // 프로토콜 정의 // Storyboarded를 준수하면서 본인이 UIViewController이라면 extension Storyboarded where Self: UIViewController {          /// 객체를 메모리에 생성하지 않고도 호출 가능한 타입 메서드입니다.     ///     /// 주어진 스토리보드 이름에서 이 타입의 뷰 컨트롤러를 인스턴스화합니다.     /// - Parameter storyboardName: 뷰 컨트롤러가 위치한 스토리보드 파일의 이름     /// - Returns: 스토리보드에서 생성된 현재 타입(Self)의 인스턴스     static func instantiate(_ storyboardName: String) -&gt; Self {         let storyboard = UIStoryboard(name: storyboardName, bundle: Bundle.main) // 내자신의 이름         let vc = storyboard.instantiateViewController(withIdentifier: String(describing: self)) as! Self         return vc     } }  extension UIViewController: Storyboarded {}   ViewController.swift import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!          override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     8. UIKit에서 SwiftUI 사용    SwiftUI + Combine을 위해 추가해보자   NumbersSwiftUIContainerVC.swift import UIKit import SwiftUI  // MARK: - HostingController final class NumbersSwiftUIViewContainerVC: UIViewController {     override func viewDidLoad() {         super.viewDidLoad()         self.view.backgroundColor = .white         self.configureHostingVC()     }          fileprivate func configureHostingVC() {         let hostingVC = UIHostingController(rootView: NumbersView())         hostingVC.view.translatesAutoresizingMaskIntoConstraints = false         self.addChild(hostingVC)         self.view.addSubview(hostingVC.view)         hostingVC.didMove(toParent: self)         NSLayoutConstraint.activate([             hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),             hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),             hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),             hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)         ])     } }  /*  uikit은 메모리 참조방식  swiftui는 뷰를 재생성하는 방식(계속 복사생성)  */ struct NumbersView: View {          @State private var input: String = &quot;&quot;     var body: some View {         VStack(alignment: .trailing) {             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             Divider()             Text(&quot;합계&quot;)                 .fontWeight(.bold)                 .foregroundStyle(.white)         }         .padding(.horizontal, 100)         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.yellow)     } }  #Preview {     NumbersView() }   ViewController import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!     @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!               override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)                  navToNumberSwiftUIBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersSwiftUIViewContainerVC()                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     9. 제네릭으로 리팩토링    위 코드로 사용을 해도 되지만, 매번 ContainerVC를 만들어야해서 이 불편함을 해결하기 위해    제네릭으로 변환해보자   NumbersSwiftUIContainerVC -&gt; SwiftUIContainerVC.swift import UIKit import SwiftUI  // MARK: - HostingController final class SwiftUIViewContainerVC&lt;SwiftUIView: View&gt;: UIViewController {          let swiftUIView: SwiftUIView          init(swiftUIView: SwiftUIView) {         self.swiftUIView = swiftUIView                  // UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다         super.init(nibName: nil, bundle: nil)     }          // 코드베이스 구현시 필요     required init?(coder: NSCoder) {         fatalError(&quot;init(coder:) has not been implemented&quot;)     }          override func viewDidLoad() {         super.viewDidLoad()         self.view.backgroundColor = .white         self.configureHostingVC()     }          fileprivate func configureHostingVC() {         let hostingVC = UIHostingController(rootView: swiftUIView)         hostingVC.view.translatesAutoresizingMaskIntoConstraints = false         self.addChild(hostingVC)         self.view.addSubview(hostingVC.view)         hostingVC.didMove(toParent: self)         NSLayoutConstraint.activate([             hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),             hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),             hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),             hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)         ])     } }  /*  uikit은 메모리 참조방식  swiftui는 뷰를 재생성하는 방식(계속 복사생성)  */ struct NumbersView: View {          @State private var input: String = &quot;&quot;     var body: some View {         VStack(alignment: .trailing) {             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             Divider()             Text(&quot;합계&quot;)                 .fontWeight(.bold)                 .foregroundStyle(.white)         }         .padding(.horizontal, 100)         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.yellow)     } }  #Preview {     NumbersView() }   ViewController import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!     @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!               override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)                  navToNumberSwiftUIBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = SwiftUIViewContainerVC(swiftUIView: NumbersView())                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }     10. 제네릭 코드를 추가 리팩토링    SwiftUIView를 가지고 있으니 Static 메서드로 뺼 수 있을 것 같다.   View+.swift import SwiftUI  extension View {     // self는 View view 프로토콜 타입 자체를 의미한다. 그런데 View는 프로토콜이기 때문에 구체적인 인스턴스를 알 수 없고 self를 View 인스턴스로 사용할 수 없다.     // 또한 static은 탕비 메서드이기 때문에 타입 자체에서 호출되며 구체적인 인스턴스를 만들지 못한다.     // 하지만 SwiftUIViewContainerVC는 생성자에서 View 인스턴스를 요구하기 때문에 타입만으로 만들 수 없다.     // 즉 self가 NumberView인스턴스가 되어야 한다     // 이미 생성이 됬을테니 static를뺸다     func getContainerVC() -&gt; UIViewController {         return SwiftUIViewContainerVC(swiftUIView: self)     } }   SwiftUIContainerVC.swift import UIKit import SwiftUI  // MARK: - HostingController final class SwiftUIViewContainerVC&lt;SwiftUIView: View&gt;: UIViewController {          let swiftUIView: SwiftUIView          init(swiftUIView: SwiftUIView) {         self.swiftUIView = swiftUIView                  // UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다         super.init(nibName: nil, bundle: nil)     }          // 코드베이스 구현시 필요     required init?(coder: NSCoder) {         fatalError(&quot;init(coder:) has not been implemented&quot;)     }          override func viewDidLoad() {         super.viewDidLoad()         self.view.backgroundColor = .white         self.configureHostingVC()     }          fileprivate func configureHostingVC() {         let hostingVC = UIHostingController(rootView: swiftUIView)         hostingVC.view.translatesAutoresizingMaskIntoConstraints = false         self.addChild(hostingVC)         self.view.addSubview(hostingVC.view)         hostingVC.didMove(toParent: self)         NSLayoutConstraint.activate([             hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),             hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),             hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),             hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)         ])     } }  /*  uikit은 메모리 참조방식  swiftui는 뷰를 재생성하는 방식(계속 복사생성)  */ struct NumbersView: View {          @State private var input: String = &quot;&quot;     var body: some View {         VStack(alignment: .trailing) {             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             TextField(&quot;&quot;, text: $input)                 .textFieldStyle(RoundedBorderTextFieldStyle())             Divider()             Text(&quot;합계&quot;)                 .fontWeight(.bold)                 .foregroundStyle(.white)         }         .padding(.horizontal, 100)         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.yellow)     } }  struct TestView: View {     var body: some View {         VStack {          }         .frame(maxWidth: .infinity, maxHeight: .infinity)         .background(.purple)     } }  #Preview {     NumbersView() }   ViewController.swift import UIKit import Combine import CombineCocoa  class ViewController: UIViewController {      // Combine의 구독을 저장하는 Set     // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다     // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다     var subscriptions = Set&lt;AnyCancellable&gt;()          @IBOutlet weak var navToNumbersBtn: UIButton!     @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!               override func viewDidLoad() {         super.viewDidLoad()                 navToNumbersBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                 self.navigationController?.pushViewController(numbersVC, animated: true)                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)                  navToNumberSwiftUIBtn             .tapPublisher             .sink(receiveValue: {                 print(#fileID, #function, #line, &quot;- &quot;)                  let numbersVC = NumbersView().getContainerVC()                 self.navigationController?.pushViewController(numbersVC, animated: true)                                  /*                 let testVC = TestView().getContainerVC()                 self.navigationController?.pushViewController(testVC, animated: true)                  */                              })             // 구독에 대한 찌꺼기가 담긴다             .store(in: &amp;subscriptions)     } }">







  <meta property="article:published_time" content="2025-07-13T00:00:00+00:00">





  

  


<link rel="canonical" href="http://localhost:4000/Combine-example-1/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "indextrown",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->

<!-- 여기에 analytics 추가 -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="DongHyeon Kim's Blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



<!--JQ cloud-->
<link rel="stylesheet" href="/assets/css/jqcloud.min.css">

<!-- pseudocode.js -->
<script src="/assets/pseudocode.js-2.4.1/pseudocode.js" type="text/javascript"></script>
<link rel="stylesheet" href="/assets/pseudocode.js-2.4.1/pseudocode.css">
    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square-neo.css" rel="stylesheet">
<link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-gothic-coding.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      extensions: ["tex2jax.js"],
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": { availableFonts: ["TeX"] }
    });
  </script>
    
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>

    <!-- Mermaid.js를 로드 기능 추가 - [index] -->
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <!-- <a class="site-logo" href="/">
          <img src="/assets/logos/logo.svg" alt="DongHyeon Kim's Blog"></a> -->
        <a class="site-title" href="/">
          @dong_h_kim
          <span class="site-subtitle">iOS Developer Blog</span>
        </a>
        <!-- Dark mode toggle -->
        <!-- <input type="checkbox" id="switch" name="theme">
        <label for="switch" class="switch_label">
          <span class="onf_btn"></span>
        </label> -->
        <script src="https://code.iconify.design/1/1.0.4/iconify.min.js">   </script>
<label class="switch_label">
<input class='toggle-checkbox' type='checkbox'></input>
<div class='toggle-slot'>
    <div class='sun-icon-wrapper'>
    <div class="iconify sun-icon" data-icon="feather-sun" data-inline="false"></div>
    </div>
    <div class='toggle-button'></div>
    <div class='moon-icon-wrapper'>
    <div class="iconify moon-icon" data-icon="feather-moon" data-inline="false"></div>
    </div>
</div>
</label>
  

  
<style>

.toggle-checkbox {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.toggle-slot {
  position: relative;
  height: 35px; /* Adjusted height for PC */
  width: 70px; /* Adjusted width for PC */
  border: 5px solid #e4e7ec;
  border-radius: 35px; /* Adjusted border-radius for PC */
  background-color: white;
  /* box-shadow: 0px 10px 25px #e4e7ec; */
  transition: background-color 250ms;
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .toggle-slot {
    height: 25px; /* Adjusted height for mobile */
    width: 50px; /* Adjusted width for mobile */
    border-radius: 25px; /* Adjusted border-radius for mobile */
    border: 3px solid #e4e7ec;
  }
}

.toggle-checkbox:checked ~ .toggle-slot {
  background-color: #374151;
}

.toggle-button {
  transform: translate(35px, 4px); /* Adjusted position for PC */
  position: absolute;
  height: 17.5px; /* Adjusted height for PC */
  width: 17.5px; /* Adjusted width for PC */
  border-radius: 50%;
  background-color: #ffeccf;
  box-shadow: inset 0px 0px 0px 3.5px #ffbb52; /* Adjusted box-shadow for PC */
  transition: background-color 250ms, border-color 250ms, transform 500ms;
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .toggle-button {
    transform: translate(27px, 3.5px); /* Adjusted position for mobile */
    height: 12.5px; /* Adjusted height for mobile */
    width: 12.5px; /* Adjusted width for mobile */
    box-shadow: inset 0px 0px 0px 2.5px #ffbb52; /* Adjusted box-shadow for mobile */
  }
}

.toggle-checkbox:checked ~ .toggle-slot .toggle-button {
  background-color: #485367;
  box-shadow: inset 0px 0px 0px 3.5px white; /* Adjusted box-shadow for PC */
  transform: translate(7px, 4px); /* Adjusted position for PC */
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .toggle-checkbox:checked ~ .toggle-slot .toggle-button {
    box-shadow: inset 0px 0px 0px 2.5px white; /* Adjusted box-shadow for mobile */
    transform: translate(4px, 3.5px); /* Adjusted position for mobile */
  }
}

.sun-icon {
  position: absolute;
  height: 18px; /* Adjusted height for PC */
  width: 18px; /* Adjusted width for PC */
  color: #ffbb52;
}

.sun-icon-wrapper {
  position: absolute;
  top: 10%;
  height: 18px; /* Adjusted height for PC */
  width: 18px; /* Adjusted width for PC */
  opacity: 1;
  transform: translate(5px, 1px) rotate(15deg); /* Adjusted position for PC */
  transform-origin: 50% 50%;
  transition: opacity 150ms, transform 500ms;
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .sun-icon,
  .sun-icon-wrapper {
    height: 11px; /* Adjusted height for mobile */
    width: 11px; /* Adjusted width for mobile */
    transform: translate(5px, 3px) rotate(15deg); /* Adjusted position for mobile */
  }
}

.toggle-checkbox:checked ~ .toggle-slot .sun-icon-wrapper {
  opacity: 0;
  transform: translate(0px, 1px) rotate(0deg); /* Adjusted position for PC */
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .toggle-checkbox:checked ~ .toggle-slot .sun-icon-wrapper {
    transform: translate(2px, 2.5px) rotate(0deg); /* Adjusted position for mobile */
  }
}

.moon-icon {
  position: absolute;
  height: 18px; /* Adjusted height for PC */
  width: 18px; /* Adjusted width for PC */
  color: white;
}

.moon-icon-wrapper {
  position: absolute;
  top: 10%;
  height: 18px; /* Adjusted height for PC */
  width: 18px; /* Adjusted width for PC */
  opacity: 0;
  transform: translate(30px, 1px) rotate(0deg); /* Adjusted position for PC */
  transform-origin: 50% 50%;
  transition: opacity 150ms, transform 500ms;
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .moon-icon,
  .moon-icon-wrapper {
    height: 11px; /* Adjusted height for mobile */
    width: 11px; /* Adjusted width for mobile */
    transform: translate(25px, 2.5px) rotate(0deg); /* Adjusted position for mobile */
  }
}

.toggle-checkbox:checked ~ .toggle-slot .moon-icon-wrapper {
  opacity: 1;
  transform: translate(35px, 1px) rotate(-15deg); /* Adjusted position for PC */
}

@media (max-width: 767px) {
  /* Styles for screens less than 768px wide (mobile) */
  .toggle-checkbox:checked ~ .toggle-slot .moon-icon-wrapper {
    transform: translate(28px, 2.5px) rotate(-15deg); /* Adjusted position for mobile */
  }
}


</style>

<script>
var checkbox = document.querySelector('.toggle-checkbox');

// 페이지 로드 시 로컬 스토리지에서 테마 설정을 불러옵니다.
if (localStorage.getItem('theme') === 'dark') {
  checkbox.checked = true;
  document.body.classList.add('dark');
} else {
  checkbox.checked = false;
  document.body.classList.remove('dark');
}

checkbox.addEventListener('change', function() {
  // 테마를 토글하고 로컬 스토리지에 저장합니다.
  // trans();
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', this.checked ? 'dark' : 'light');
});
</script>

        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/">Articles</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

<script>
  $(function(){
  var $header = $('masthead'); //헤더를 변수에 넣기
  var $page = $('.initial-content'); //색상이 변할 부분
  var $window = $(window);
  var pageOffsetTop = $page.offset().top;//색상 변할 부분의 top값 구하기
  
  $window.resize(function(){ //반응형을 대비하여 리사이즈시 top값을 다시 계산
    pageOffsetTop = $page.offset().top;
  });
  
  $window.on('scroll', function(){ //스크롤시
    var scrolled = $window.scrollTop() >= pageOffsetTop; //스크롤된 상태; true or false
    $header.toggleClass('down', scrolled); //클래스 토글
  });
});

// var menuToggleButton = document.querySelector("button.toggle");
// var menuTarget = document.querySelector(".side-menu");
// var menuBlock = document.querySelector("menu");

// function toggleMenuVisibility(){
// 	menuTarget.classList.toggle("side-menu--active");
// 	animateCSS(".menu", "fadeIn");
// }

// function animateCSS(element, animationName, callback) {
//     var node = document.querySelector(element)
//     node.classList.add('animated', animationName)

//     function handleAnimationEnd() {
//         node.classList.remove('animated', animationName)
//         node.removeEventListener('animationend', handleAnimationEnd)

//         if (typeof callback === 'function') callback()
//     }

//     node.addEventListener('animationend', handleAnimationEnd)
// }

// menuToggleButton.addEventListener('click', toggleMenuVisibility);

// Dark mode toggle

var checkbox = document.querySelector('input[name=theme]');

// 페이지 로드 시 로컬 스토리지에서 테마 설정을 불러옵니다.
if (localStorage.getItem('theme') === 'dark') {
  checkbox.checked = true;
  document.body.classList.add('dark');
} else {
  checkbox.checked = false;
  document.body.classList.remove('dark');
}

checkbox.addEventListener('change', function() {
  // 테마를 토글하고 로컬 스토리지에 저장합니다.
  // trans();
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', this.checked ? 'dark' : 'light');
});


// let trans = () => {
//   document.documentElement.classList.add('transition');
//   window.setTimeout(() => {
//     document.documentElement.classList.remove('transition');
//   }, 500);
// }
</script>

    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[Combine] 예제 1 &amp; 제네릭으로 UIKit에서 SwiftUI 불러오기">
    <meta itemprop="description" content="Combine 예제1. scrollView 추가 및 상하좌우 제약 0 설정2. UIView 추가 및 추가한 UIView를 Content Layout Guide에 드래그하여 상하좌우 제약 0 설정  UIView를 Frame Layout Guide로 드래그해서 Equal Width 해주자  size inspactor에서 width(가로막대) 더블 클릭 -&gt; Proportional Widt~ 클릭 -&gt; Multiplier를 1로 설정  이상태에서 빨간 오류 뜨는 이유는 View에 대한 내용물이 없어서 즉 크기가 없어서 그렇다3. View에 Vertical Stack View 생성  Stack View를 View로 드래그하여 상하좌우 제약 0으로 설정  vertical stack에서 가로 크기를 꽉 채우기 위해 alighment는 fill 설정  vertical stack에서 내용물을 동일하게 분배시키기 위해 fill equally 설정  spacing 20 설정  이제 크기가 있는 애를 스택뷰에 넣으면 오토레이아웃이 잡힌다  추가적으로 size inspactor에서 simulated size를 Fixed -&gt; Freeform으로 변경한다, 높이를 1000으로 설정한다.4. 결과5. 화면이동을 위해 네비게이션 컨투롤러로 감싸기6. 화면이동 코드////  ViewController.swift//  CombineTutorial-example////  Created by 김동현 on 7/14/25.//import UIKitimport Combineimport CombineCocoaclass ViewController: UIViewController {    // Combine의 구독을 저장하는 Set    // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다    // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다    var subscriptions = Set&lt;AnyCancellable&gt;()        @IBOutlet weak var navToNumbersBtn: UIButton!        override func viewDidLoad() {        super.viewDidLoad()               navToNumbersBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                #warning(&quot;TODO: - numbers로 화면이동&quot;)                let numbersStoryboard = UIStoryboard(name: &quot;Numbers&quot;, bundle: Bundle.main)                                // vc의 storyboardId                let numbersVC = numbersStoryboard.instantiateViewController(withIdentifier: &quot;NumbersViewController&quot;)                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)    }}7. 화면이동 코드 리팩토링 꿀팁  name과 withIdentifier를 하드코딩하지 않는 간단한 방법으로 수정 가능하다.  프로토콜을 활용하면 된다.UIViewController+.swiftimport UIKit/* static 변수 - 인스턴스를 생성하지 않아도 접근할 수 있다 - 타입에 속한 변수이며, 모든 인스턴스가 이 값을 공유한다  static 함수는 - 인스턴스를 만들지 않고도 호출할 수 있다 - 보통 공통 정보 제공이나 객체 생성 팩토리 용도로 사용한다  */protocol Storyboarded {    // static함수는 해당하는 객체를 메모리에 만들지 않아도 만들 수 있다    static func instantiate(_ storyboardName: String) -&gt; Self}// 프로토콜 정의// Storyboarded를 준수하면서 본인이 UIViewController이라면extension Storyboarded where Self: UIViewController {        /// 객체를 메모리에 생성하지 않고도 호출 가능한 타입 메서드입니다.    ///    /// 주어진 스토리보드 이름에서 이 타입의 뷰 컨트롤러를 인스턴스화합니다.    /// - Parameter storyboardName: 뷰 컨트롤러가 위치한 스토리보드 파일의 이름    /// - Returns: 스토리보드에서 생성된 현재 타입(Self)의 인스턴스    static func instantiate(_ storyboardName: String) -&gt; Self {        let storyboard = UIStoryboard(name: storyboardName, bundle: Bundle.main) // 내자신의 이름        let vc = storyboard.instantiateViewController(withIdentifier: String(describing: self)) as! Self        return vc    }}extension UIViewController: Storyboarded {}ViewController.swiftimport UIKitimport Combineimport CombineCocoaclass ViewController: UIViewController {    // Combine의 구독을 저장하는 Set    // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다    // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다    var subscriptions = Set&lt;AnyCancellable&gt;()        @IBOutlet weak var navToNumbersBtn: UIButton!        override func viewDidLoad() {        super.viewDidLoad()               navToNumbersBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)    }}8. UIKit에서 SwiftUI 사용  SwiftUI + Combine을 위해 추가해보자NumbersSwiftUIContainerVC.swiftimport UIKitimport SwiftUI// MARK: - HostingControllerfinal class NumbersSwiftUIViewContainerVC: UIViewController {    override func viewDidLoad() {        super.viewDidLoad()        self.view.backgroundColor = .white        self.configureHostingVC()    }        fileprivate func configureHostingVC() {        let hostingVC = UIHostingController(rootView: NumbersView())        hostingVC.view.translatesAutoresizingMaskIntoConstraints = false        self.addChild(hostingVC)        self.view.addSubview(hostingVC.view)        hostingVC.didMove(toParent: self)        NSLayoutConstraint.activate([            hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),            hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),            hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),            hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)        ])    }}/* uikit은 메모리 참조방식 swiftui는 뷰를 재생성하는 방식(계속 복사생성) */struct NumbersView: View {        @State private var input: String = &quot;&quot;    var body: some View {        VStack(alignment: .trailing) {            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            Divider()            Text(&quot;합계&quot;)                .fontWeight(.bold)                .foregroundStyle(.white)        }        .padding(.horizontal, 100)        .frame(maxWidth: .infinity, maxHeight: .infinity)        .background(.yellow)    }}#Preview {    NumbersView()}ViewControllerimport UIKitimport Combineimport CombineCocoaclass ViewController: UIViewController {    // Combine의 구독을 저장하는 Set    // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다    // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다    var subscriptions = Set&lt;AnyCancellable&gt;()        @IBOutlet weak var navToNumbersBtn: UIButton!    @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!            override func viewDidLoad() {        super.viewDidLoad()               navToNumbersBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)                navToNumberSwiftUIBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = NumbersSwiftUIViewContainerVC()                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)    }}9. 제네릭으로 리팩토링  위 코드로 사용을 해도 되지만, 매번 ContainerVC를 만들어야해서 이 불편함을 해결하기 위해   제네릭으로 변환해보자NumbersSwiftUIContainerVC -&gt; SwiftUIContainerVC.swiftimport UIKitimport SwiftUI// MARK: - HostingControllerfinal class SwiftUIViewContainerVC&lt;SwiftUIView: View&gt;: UIViewController {        let swiftUIView: SwiftUIView        init(swiftUIView: SwiftUIView) {        self.swiftUIView = swiftUIView                // UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다        super.init(nibName: nil, bundle: nil)    }        // 코드베이스 구현시 필요    required init?(coder: NSCoder) {        fatalError(&quot;init(coder:) has not been implemented&quot;)    }        override func viewDidLoad() {        super.viewDidLoad()        self.view.backgroundColor = .white        self.configureHostingVC()    }        fileprivate func configureHostingVC() {        let hostingVC = UIHostingController(rootView: swiftUIView)        hostingVC.view.translatesAutoresizingMaskIntoConstraints = false        self.addChild(hostingVC)        self.view.addSubview(hostingVC.view)        hostingVC.didMove(toParent: self)        NSLayoutConstraint.activate([            hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),            hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),            hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),            hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)        ])    }}/* uikit은 메모리 참조방식 swiftui는 뷰를 재생성하는 방식(계속 복사생성) */struct NumbersView: View {        @State private var input: String = &quot;&quot;    var body: some View {        VStack(alignment: .trailing) {            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            Divider()            Text(&quot;합계&quot;)                .fontWeight(.bold)                .foregroundStyle(.white)        }        .padding(.horizontal, 100)        .frame(maxWidth: .infinity, maxHeight: .infinity)        .background(.yellow)    }}#Preview {    NumbersView()}ViewControllerimport UIKitimport Combineimport CombineCocoaclass ViewController: UIViewController {    // Combine의 구독을 저장하는 Set    // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다    // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다    var subscriptions = Set&lt;AnyCancellable&gt;()        @IBOutlet weak var navToNumbersBtn: UIButton!    @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!            override func viewDidLoad() {        super.viewDidLoad()               navToNumbersBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)                navToNumberSwiftUIBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = SwiftUIViewContainerVC(swiftUIView: NumbersView())                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)    }}10. 제네릭 코드를 추가 리팩토링  SwiftUIView를 가지고 있으니 Static 메서드로 뺼 수 있을 것 같다.View+.swiftimport SwiftUIextension View {    // self는 View view 프로토콜 타입 자체를 의미한다. 그런데 View는 프로토콜이기 때문에 구체적인 인스턴스를 알 수 없고 self를 View 인스턴스로 사용할 수 없다.    // 또한 static은 탕비 메서드이기 때문에 타입 자체에서 호출되며 구체적인 인스턴스를 만들지 못한다.    // 하지만 SwiftUIViewContainerVC는 생성자에서 View 인스턴스를 요구하기 때문에 타입만으로 만들 수 없다.    // 즉 self가 NumberView인스턴스가 되어야 한다    // 이미 생성이 됬을테니 static를뺸다    func getContainerVC() -&gt; UIViewController {        return SwiftUIViewContainerVC(swiftUIView: self)    }}SwiftUIContainerVC.swiftimport UIKitimport SwiftUI// MARK: - HostingControllerfinal class SwiftUIViewContainerVC&lt;SwiftUIView: View&gt;: UIViewController {        let swiftUIView: SwiftUIView        init(swiftUIView: SwiftUIView) {        self.swiftUIView = swiftUIView                // UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다        super.init(nibName: nil, bundle: nil)    }        // 코드베이스 구현시 필요    required init?(coder: NSCoder) {        fatalError(&quot;init(coder:) has not been implemented&quot;)    }        override func viewDidLoad() {        super.viewDidLoad()        self.view.backgroundColor = .white        self.configureHostingVC()    }        fileprivate func configureHostingVC() {        let hostingVC = UIHostingController(rootView: swiftUIView)        hostingVC.view.translatesAutoresizingMaskIntoConstraints = false        self.addChild(hostingVC)        self.view.addSubview(hostingVC.view)        hostingVC.didMove(toParent: self)        NSLayoutConstraint.activate([            hostingVC.view.topAnchor.constraint(equalTo: self.view.topAnchor),            hostingVC.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor),            hostingVC.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),            hostingVC.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor)        ])    }}/* uikit은 메모리 참조방식 swiftui는 뷰를 재생성하는 방식(계속 복사생성) */struct NumbersView: View {        @State private var input: String = &quot;&quot;    var body: some View {        VStack(alignment: .trailing) {            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            TextField(&quot;&quot;, text: $input)                .textFieldStyle(RoundedBorderTextFieldStyle())            Divider()            Text(&quot;합계&quot;)                .fontWeight(.bold)                .foregroundStyle(.white)        }        .padding(.horizontal, 100)        .frame(maxWidth: .infinity, maxHeight: .infinity)        .background(.yellow)    }}struct TestView: View {    var body: some View {        VStack {        }        .frame(maxWidth: .infinity, maxHeight: .infinity)        .background(.purple)    }}#Preview {    NumbersView()}ViewController.swiftimport UIKitimport Combineimport CombineCocoaclass ViewController: UIViewController {    // Combine의 구독을 저장하는 Set    // VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다    // 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다    var subscriptions = Set&lt;AnyCancellable&gt;()        @IBOutlet weak var navToNumbersBtn: UIButton!    @IBOutlet weak var navToNumberSwiftUIBtn: UIButton!            override func viewDidLoad() {        super.viewDidLoad()               navToNumbersBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = NumbersViewController.instantiate(&quot;Numbers&quot;)                self.navigationController?.pushViewController(numbersVC, animated: true)                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)                navToNumberSwiftUIBtn            .tapPublisher            .sink(receiveValue: {                print(#fileID, #function, #line, &quot;- &quot;)                let numbersVC = NumbersView().getContainerVC()                self.navigationController?.pushViewController(numbersVC, animated: true)                                /*                let testVC = TestView().getContainerVC()                self.navigationController?.pushViewController(testVC, animated: true)                 */                            })            // 구독에 대한 찌꺼기가 담긴다            .store(in: &amp;subscriptions)    }}">
    <meta itemprop="datePublished" content="2025-07-13T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/Combine-example-1/" class="u-url" itemprop="url">[Combine] 예제 1 &amp; 제네릭으로 UIKit에서 SwiftUI 불러오기
</a>
          </h1>
          <footer class="page__meta">
            
  



  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags : </strong>
    <span class="archive__item-tags">
    
    
    
      <a class="posttag tagged" href="/posts/?tag=Combine">Combine</a>
    
    
    </span>  
  </p>



<!--  -->
            

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Date :</strong> <time class="dt-published" datetime="2025-07-13T00:00:00+00:00">July 13, 2025</time></p>

          </footer>
        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <!-- https://www.youtube.com/watch?v=sBybUm8yVbI&list=PLgOlaPUIbynpuq9GKCwAedgWkkPm2Wo8v&index=18 -->

<!-- <img src="/assets/img/2025-05-08-[UIKit]-tableView2/1.png" alt="1" width="50%"> -->

<!-- <img src="/assets/img/2025-05-08-%5BUIKit%5D-tableView2/1.png" alt="이미지" width="30%"> -->

<!-- <img src="/assets/img/2025-05-08-%5BUIKit%5D-tableView2/1.png" alt="이미지" width="30%"> -->

<h2 id="combine-예제">Combine 예제</h2>

<p><img src="/assets/img/2025-06-18-%5BCombine%5D-/image-20250714015117890.png" alt="이미지" width="70%" /></p>
<h4 id="1-scrollview-추가-및-상하좌우-제약-0-설정">1. scrollView 추가 및 상하좌우 제약 0 설정</h4>
<p><br /><br /></p>

<hr />

<p><img src="/assets/img/2025-07-13-%5BCombine%5D-example%201/image-20250714020253349.png" alt="이미지" width="70%" /></p>
<h4 id="2-uiview-추가-및-추가한-uiview를-content-layout-guide에-드래그하여-상하좌우-제약-0-설정">2. UIView 추가 및 추가한 UIView를 Content Layout Guide에 드래그하여 상하좌우 제약 0 설정</h4>
<ul>
  <li>UIView를 Frame Layout Guide로 드래그해서 Equal Width 해주자</li>
  <li>size inspactor에서 width(가로막대) 더블 클릭 -&gt; Proportional Widt~ 클릭 -&gt; Multiplier를 1로 설정</li>
  <li>이상태에서 빨간 오류 뜨는 이유는 View에 대한 내용물이 없어서 즉 크기가 없어서 그렇다<br />
<br /><br /></li>
</ul>

<hr />

<p><img src="/assets/img/2025-07-13-%5BCombine%5D-example%201/image-20250714020847129.png" alt="이미지" width="70%" /></p>

<h4 id="3-view에-vertical-stack-view-생성">3. View에 Vertical Stack View 생성</h4>
<ul>
  <li>Stack View를 View로 드래그하여 상하좌우 제약 0으로 설정</li>
  <li>vertical stack에서 가로 크기를 꽉 채우기 위해 alighment는 fill 설정</li>
  <li>vertical stack에서 내용물을 동일하게 분배시키기 위해 fill equally 설정</li>
  <li>spacing 20 설정</li>
  <li>이제 크기가 있는 애를 스택뷰에 넣으면 오토레이아웃이 잡힌다</li>
  <li>추가적으로 size inspactor에서 simulated size를 Fixed -&gt; Freeform으로 변경한다, 높이를 1000으로 설정한다.<br />
<br /><br /></li>
</ul>

<hr />

<h4 id="4-결과">4. 결과</h4>
<p><img src="/assets/img/2025-07-13-%5BCombine%5D-example%201/image-20250714021514646.png" alt="이미지" width="70%" /></p>

<hr />

<h4 id="5-화면이동을-위해-네비게이션-컨투롤러로-감싸기">5. 화면이동을 위해 네비게이션 컨투롤러로 감싸기</h4>

<p><img src="/assets/img/2025-07-13-%5BCombine%5D-example%201/image-20250717165409170.png" alt="이미지" width="70%" /></p>

<hr />

<h3 id="6-화면이동-코드">6. 화면이동 코드</h3>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//</span>
<span class="c1">//  ViewController.swift</span>
<span class="c1">//  CombineTutorial-example</span>
<span class="c1">//</span>
<span class="c1">//  Created by 김동현 on 7/14/25.</span>
<span class="c1">//</span>

<span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Combine</span>
<span class="kd">import</span> <span class="kt">CombineCocoa</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="c1">// Combine의 구독을 저장하는 Set</span>
    <span class="c1">// VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다</span>
    <span class="c1">// 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다</span>
    <span class="k">var</span> <span class="nv">subscriptions</span> <span class="o">=</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">AnyCancellable</span><span class="o">&gt;</span><span class="p">()</span>
    
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumbersBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
       
        <span class="n">navToNumbersBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>
                <span class="cp">#warning("TODO: - numbers로 화면이동")</span>
                <span class="k">let</span> <span class="nv">numbersStoryboard</span> <span class="o">=</span> <span class="kt">UIStoryboard</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Numbers"</span><span class="p">,</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="p">)</span>
                
                <span class="c1">// vc의 storyboardId</span>
                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="n">numbersStoryboard</span><span class="o">.</span><span class="nf">instantiateViewController</span><span class="p">(</span><span class="nv">withIdentifier</span><span class="p">:</span> <span class="s">"NumbersViewController"</span><span class="p">)</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h4 id="7-화면이동-코드-리팩토링-꿀팁">7. 화면이동 코드 리팩토링 꿀팁</h4>
<ul>
  <li>name과 withIdentifier를 하드코딩하지 않는 간단한 방법으로 수정 가능하다.</li>
  <li>프로토콜을 활용하면 된다.</li>
</ul>

<h4 id="uiviewcontrollerswift">UIViewController+.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="cm">/*
 static 변수
 - 인스턴스를 생성하지 않아도 접근할 수 있다
 - 타입에 속한 변수이며, 모든 인스턴스가 이 값을 공유한다
 
 static 함수는
 - 인스턴스를 만들지 않고도 호출할 수 있다
 - 보통 공통 정보 제공이나 객체 생성 팩토리 용도로 사용한다
 
 */</span>

<span class="kd">protocol</span> <span class="kt">Storyboarded</span> <span class="p">{</span>
    <span class="c1">// static함수는 해당하는 객체를 메모리에 만들지 않아도 만들 수 있다</span>
    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">instantiate</span><span class="p">(</span><span class="n">_</span> <span class="nv">storyboardName</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
<span class="p">}</span>

<span class="c1">// 프로토콜 정의</span>
<span class="c1">// Storyboarded를 준수하면서 본인이 UIViewController이라면</span>
<span class="kd">extension</span> <span class="kt">Storyboarded</span> <span class="k">where</span> <span class="k">Self</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    
    <span class="c1">/// 객체를 메모리에 생성하지 않고도 호출 가능한 타입 메서드입니다.</span>
    <span class="c1">///</span>
    <span class="c1">/// 주어진 스토리보드 이름에서 이 타입의 뷰 컨트롤러를 인스턴스화합니다.</span>
    <span class="c1">/// - Parameter storyboardName: 뷰 컨트롤러가 위치한 스토리보드 파일의 이름</span>
    <span class="c1">/// - Returns: 스토리보드에서 생성된 현재 타입(Self)의 인스턴스</span>
    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">instantiate</span><span class="p">(</span><span class="n">_</span> <span class="nv">storyboardName</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">storyboard</span> <span class="o">=</span> <span class="kt">UIStoryboard</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="n">storyboardName</span><span class="p">,</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="c1">// 내자신의 이름</span>
        <span class="k">let</span> <span class="nv">vc</span> <span class="o">=</span> <span class="n">storyboard</span><span class="o">.</span><span class="nf">instantiateViewController</span><span class="p">(</span><span class="nv">withIdentifier</span><span class="p">:</span> <span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="k">self</span><span class="p">))</span> <span class="k">as!</span> <span class="k">Self</span>
        <span class="k">return</span> <span class="n">vc</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">UIViewController</span><span class="p">:</span> <span class="kt">Storyboarded</span> <span class="p">{}</span>
</code></pre></div></div>

<h4 id="viewcontrollerswift">ViewController.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Combine</span>
<span class="kd">import</span> <span class="kt">CombineCocoa</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="c1">// Combine의 구독을 저장하는 Set</span>
    <span class="c1">// VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다</span>
    <span class="c1">// 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다</span>
    <span class="k">var</span> <span class="nv">subscriptions</span> <span class="o">=</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">AnyCancellable</span><span class="o">&gt;</span><span class="p">()</span>
    
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumbersBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
       
        <span class="n">navToNumbersBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">NumbersViewController</span><span class="o">.</span><span class="nf">instantiate</span><span class="p">(</span><span class="s">"Numbers"</span><span class="p">)</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h4 id="8-uikit에서-swiftui-사용">8. UIKit에서 SwiftUI 사용</h4>
<ul>
  <li>SwiftUI + Combine을 위해 추가해보자</li>
</ul>

<h4 id="numbersswiftuicontainervcswift">NumbersSwiftUIContainerVC.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="c1">// MARK: - HostingController</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="kt">NumbersSwiftUIViewContainerVC</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="o">.</span><span class="n">white</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">configureHostingVC</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">fileprivate</span> <span class="kd">func</span> <span class="nf">configureHostingVC</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">hostingVC</span> <span class="o">=</span> <span class="kt">UIHostingController</span><span class="p">(</span><span class="nv">rootView</span><span class="p">:</span> <span class="kt">NumbersView</span><span class="p">())</span>
        <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">hostingVC</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">hostingVC</span><span class="o">.</span><span class="nf">didMove</span><span class="p">(</span><span class="nv">toParent</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
        <span class="kt">NSLayoutConstraint</span><span class="o">.</span><span class="nf">activate</span><span class="p">([</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">topAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">topAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="p">)</span>
        <span class="p">])</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*
 uikit은 메모리 참조방식
 swiftui는 뷰를 재생성하는 방식(계속 복사생성)
 */</span>
<span class="kd">struct</span> <span class="kt">NumbersView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">Divider</span><span class="p">()</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"합계"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">maxWidth</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">,</span> <span class="nv">maxHeight</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="o">.</span><span class="n">yellow</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">#Preview {</span>
    <span class="kt">NumbersView</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="viewcontroller">ViewController</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Combine</span>
<span class="kd">import</span> <span class="kt">CombineCocoa</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="c1">// Combine의 구독을 저장하는 Set</span>
    <span class="c1">// VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다</span>
    <span class="c1">// 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다</span>
    <span class="k">var</span> <span class="nv">subscriptions</span> <span class="o">=</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">AnyCancellable</span><span class="o">&gt;</span><span class="p">()</span>
    
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumbersBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumberSwiftUIBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
       
        <span class="n">navToNumbersBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">NumbersViewController</span><span class="o">.</span><span class="nf">instantiate</span><span class="p">(</span><span class="s">"Numbers"</span><span class="p">)</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
        
        <span class="n">navToNumberSwiftUIBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">NumbersSwiftUIViewContainerVC</span><span class="p">()</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="9-제네릭으로-리팩토링">9. 제네릭으로 리팩토링</h3>
<ul>
  <li>위 코드로 사용을 해도 되지만, 매번 ContainerVC를 만들어야해서 이 불편함을 해결하기 위해   <br />
제네릭으로 변환해보자</li>
</ul>

<h4 id="numbersswiftuicontainervc---swiftuicontainervcswift">NumbersSwiftUIContainerVC -&gt; SwiftUIContainerVC.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="c1">// MARK: - HostingController</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="kt">SwiftUIViewContainerVC</span><span class="o">&lt;</span><span class="kt">SwiftUIView</span><span class="p">:</span> <span class="kt">View</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    
    <span class="k">let</span> <span class="nv">swiftUIView</span><span class="p">:</span> <span class="kt">SwiftUIView</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">swiftUIView</span><span class="p">:</span> <span class="kt">SwiftUIView</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">swiftUIView</span> <span class="o">=</span> <span class="n">swiftUIView</span>
        
        <span class="c1">// UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">nibName</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="c1">// 코드베이스 구현시 필요</span>
    <span class="kd">required</span> <span class="nf">init</span><span class="p">?(</span><span class="nv">coder</span><span class="p">:</span> <span class="kt">NSCoder</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">fatalError</span><span class="p">(</span><span class="s">"init(coder:) has not been implemented"</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="o">.</span><span class="n">white</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">configureHostingVC</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">fileprivate</span> <span class="kd">func</span> <span class="nf">configureHostingVC</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">hostingVC</span> <span class="o">=</span> <span class="kt">UIHostingController</span><span class="p">(</span><span class="nv">rootView</span><span class="p">:</span> <span class="n">swiftUIView</span><span class="p">)</span>
        <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">hostingVC</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">hostingVC</span><span class="o">.</span><span class="nf">didMove</span><span class="p">(</span><span class="nv">toParent</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
        <span class="kt">NSLayoutConstraint</span><span class="o">.</span><span class="nf">activate</span><span class="p">([</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">topAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">topAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="p">)</span>
        <span class="p">])</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*
 uikit은 메모리 참조방식
 swiftui는 뷰를 재생성하는 방식(계속 복사생성)
 */</span>
<span class="kd">struct</span> <span class="kt">NumbersView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">Divider</span><span class="p">()</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"합계"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">maxWidth</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">,</span> <span class="nv">maxHeight</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="o">.</span><span class="n">yellow</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">#Preview {</span>
    <span class="kt">NumbersView</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="viewcontroller-1">ViewController</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Combine</span>
<span class="kd">import</span> <span class="kt">CombineCocoa</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="c1">// Combine의 구독을 저장하는 Set</span>
    <span class="c1">// VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다</span>
    <span class="c1">// 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다</span>
    <span class="k">var</span> <span class="nv">subscriptions</span> <span class="o">=</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">AnyCancellable</span><span class="o">&gt;</span><span class="p">()</span>
    
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumbersBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumberSwiftUIBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
       
        <span class="n">navToNumbersBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">NumbersViewController</span><span class="o">.</span><span class="nf">instantiate</span><span class="p">(</span><span class="s">"Numbers"</span><span class="p">)</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
        
        <span class="n">navToNumberSwiftUIBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">SwiftUIViewContainerVC</span><span class="p">(</span><span class="nv">swiftUIView</span><span class="p">:</span> <span class="kt">NumbersView</span><span class="p">())</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h4 id="10-제네릭-코드를-추가-리팩토링">10. 제네릭 코드를 추가 리팩토링</h4>
<ul>
  <li>SwiftUIView를 가지고 있으니 Static 메서드로 뺼 수 있을 것 같다.</li>
</ul>

<h4 id="viewswift">View+.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">extension</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="c1">// self는 View view 프로토콜 타입 자체를 의미한다. 그런데 View는 프로토콜이기 때문에 구체적인 인스턴스를 알 수 없고 self를 View 인스턴스로 사용할 수 없다.</span>
    <span class="c1">// 또한 static은 탕비 메서드이기 때문에 타입 자체에서 호출되며 구체적인 인스턴스를 만들지 못한다.</span>
    <span class="c1">// 하지만 SwiftUIViewContainerVC는 생성자에서 View 인스턴스를 요구하기 때문에 타입만으로 만들 수 없다.</span>
    <span class="c1">// 즉 self가 NumberView인스턴스가 되어야 한다</span>
    <span class="c1">// 이미 생성이 됬을테니 static를뺸다</span>
    <span class="kd">func</span> <span class="nf">getContainerVC</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">UIViewController</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">SwiftUIViewContainerVC</span><span class="p">(</span><span class="nv">swiftUIView</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="swiftuicontainervcswift">SwiftUIContainerVC.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="c1">// MARK: - HostingController</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="kt">SwiftUIViewContainerVC</span><span class="o">&lt;</span><span class="kt">SwiftUIView</span><span class="p">:</span> <span class="kt">View</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    
    <span class="k">let</span> <span class="nv">swiftUIView</span><span class="p">:</span> <span class="kt">SwiftUIView</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">swiftUIView</span><span class="p">:</span> <span class="kt">SwiftUIView</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">swiftUIView</span> <span class="o">=</span> <span class="n">swiftUIView</span>
        
        <span class="c1">// UIViewController를 상속받기 때문에 부모의 viewController생성자를 호출해줘야한다</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">nibName</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="c1">// 코드베이스 구현시 필요</span>
    <span class="kd">required</span> <span class="nf">init</span><span class="p">?(</span><span class="nv">coder</span><span class="p">:</span> <span class="kt">NSCoder</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">fatalError</span><span class="p">(</span><span class="s">"init(coder:) has not been implemented"</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="o">.</span><span class="n">white</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">configureHostingVC</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">fileprivate</span> <span class="kd">func</span> <span class="nf">configureHostingVC</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">hostingVC</span> <span class="o">=</span> <span class="kt">UIHostingController</span><span class="p">(</span><span class="nv">rootView</span><span class="p">:</span> <span class="n">swiftUIView</span><span class="p">)</span>
        <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">hostingVC</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">hostingVC</span><span class="o">.</span><span class="nf">didMove</span><span class="p">(</span><span class="nv">toParent</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
        <span class="kt">NSLayoutConstraint</span><span class="o">.</span><span class="nf">activate</span><span class="p">([</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">topAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">topAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">leadingAnchor</span><span class="p">),</span>
            <span class="n">hostingVC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">trailingAnchor</span><span class="p">)</span>
        <span class="p">])</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*
 uikit은 메모리 참조방식
 swiftui는 뷰를 재생성하는 방식(계속 복사생성)
 */</span>
<span class="kd">struct</span> <span class="kt">NumbersView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">trailing</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">TextField</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="n">$input</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">textFieldStyle</span><span class="p">(</span><span class="kt">RoundedBorderTextFieldStyle</span><span class="p">())</span>
            <span class="kt">Divider</span><span class="p">()</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"합계"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="o">.</span><span class="n">bold</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundStyle</span><span class="p">(</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">padding</span><span class="p">(</span><span class="o">.</span><span class="n">horizontal</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">maxWidth</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">,</span> <span class="nv">maxHeight</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="o">.</span><span class="n">yellow</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">TestView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>

        <span class="p">}</span>
        <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">maxWidth</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">,</span> <span class="nv">maxHeight</span><span class="p">:</span> <span class="o">.</span><span class="n">infinity</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="o">.</span><span class="n">purple</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">#Preview {</span>
    <span class="kt">NumbersView</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="viewcontrollerswift-1">ViewController.swift</h4>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Combine</span>
<span class="kd">import</span> <span class="kt">CombineCocoa</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="c1">// Combine의 구독을 저장하는 Set</span>
    <span class="c1">// VC가 해제되면 subscriptions 프로퍼티도 함께 메모리에서 해제되고, 그 안에 저장된 구독들도 함께 해제되어 메모리 누수를 방지한다</span>
    <span class="c1">// 구독 찌꺼기 담는 통: VC가 메모리에서 해제되면 VC에서 사용된 구독 찌꺼기가 담긴다</span>
    <span class="k">var</span> <span class="nv">subscriptions</span> <span class="o">=</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">AnyCancellable</span><span class="o">&gt;</span><span class="p">()</span>
    
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumbersBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">navToNumberSwiftUIBtn</span><span class="p">:</span> <span class="kt">UIButton</span><span class="o">!</span>
    
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
       
        <span class="n">navToNumbersBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">NumbersViewController</span><span class="o">.</span><span class="nf">instantiate</span><span class="p">(</span><span class="s">"Numbers"</span><span class="p">)</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
        
        <span class="n">navToNumberSwiftUIBtn</span>
            <span class="o">.</span><span class="n">tapPublisher</span>
            <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="k">#fileID</span><span class="p">,</span> <span class="k">#function</span><span class="p">,</span> <span class="k">#line</span><span class="p">,</span> <span class="s">"- "</span><span class="p">)</span>

                <span class="k">let</span> <span class="nv">numbersVC</span> <span class="o">=</span> <span class="kt">NumbersView</span><span class="p">()</span><span class="o">.</span><span class="nf">getContainerVC</span><span class="p">()</span>
                <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="p">?</span><span class="o">.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">numbersVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
                
                <span class="cm">/*
                let testVC = TestView().getContainerVC()
                self.navigationController?.pushViewController(testVC, animated: true)
                 */</span>
                
            <span class="p">})</span>
            <span class="c1">// 구독에 대한 찌꺼기가 담긴다</span>
            <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">subscriptions</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

        
      </section>

      

      
  <nav class="pagination">
    
      <a href="/Haruhancut-refactor-font/" class="pagination--pager" title="[Haruhancut] 1. 하루한컷 리팩토링 - 폰트, 색상 세팅
">Previous</a>
    
    
      <a href="/Pindora-di/" class="pagination--pager" title="[Pindora] Dependency Injection란?
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://github.com/indextrown" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2026 indextrown. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

<script src="/assets/js/jqcloud.min.js" charset="utf-8"></script>
      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>



    <script>
  'use strict';

  var theme = localStorage.getItem('theme');

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'indextrown/indextrown.github.io');
    script.setAttribute('issue-term', 'pathname');
    

    if (theme === 'dark') {
      script.setAttribute('theme', 'github-dark');
    } else {
      script.setAttribute('theme', 'github-light');
    }
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





    <aside class="sidebar__home">
      <a href="/posts">
        <div style="font-size: 0.5rem;"><i class="fas fa-h-square fa-5x"></i></div>
      </a>
    </aside>

    <aside class="sidebar__top">
      <a href="#site-nav">
        <div style="font-size: 0.5rem;"><i class="fas fa-caret-square-up fa-5x"></i></div>
      </a>
    </aside>

    <aside class="sidebar__bottom">
      <a href="#footer">
        <div style="font-size: 0.5rem;"><i class="fas fa-caret-square-down fa-5x"></i></div>
      </a>
    </aside>

  </body>
</html>
